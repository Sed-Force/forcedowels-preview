<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Theme Toggle Test - Force Dowels</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="/" aria-label="Force Dowel Company">
        <img src="/images/force-dowel-logo.jpg" alt="Force Dowel Company logo" />
      </a>
      
      <nav class="nav" aria-label="Primary">
        <a href="/">Home</a>
        <a href="/order.html">Order</a>
      </nav>
      
      <div class="header-actions">
        <!-- Theme Toggle -->
        <button class="btn btn--ghost btn--invert" id="theme-toggle" type="button" aria-label="Toggle theme">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" class="theme-icon theme-icon-light">
            <path fill="currentColor" d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12M12 2a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1m0 18a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1M20.66 7.34a1 1 0 0 1 0 1.41l-.71.71a1 1 0 1 1-1.41-1.41l.71-.71a1 1 0 0 1 1.41 0M5.46 17.54a1 1 0 0 1 0 1.41l-.71.71a1 1 0 1 1-1.41-1.41l.71-.71a1 1 0 0 1 1.41 0M22 12a1 1 0 0 1-1 1h-1a1 1 0 1 1 0-2h1a1 1 0 0 1 1 1M4 12a1 1 0 0 1-1 1H2a1 1 0 1 1 0-2h1a1 1 0 0 1 1 1m16.66 4.66a1 1 0 0 1-1.41 0l-.71-.71a1 1 0 0 1 1.41-1.41l.71.71a1 1 0 0 1 0 1.41M7.75 6.25a1 1 0 0 1-1.41 0l-.71-.71a1 1 0 0 1 1.41-1.41l.71.71a1 1 0 0 1 0 1.41"/>
          </svg>
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" class="theme-icon theme-icon-dark">
            <path fill="currentColor" d="M12 21q-3.75 0-6.375-2.625T3 12q0-3.75 2.625-6.375T12 3q.35 0 .688.025t.662.075q-1.025.725-1.638 1.888T11.1 7.5q0 2.25 1.575 3.825T16.5 12.9q1.375 0 2.525-.613T20.9 10.65q.05.325.075.662T21 12q0 3.75-2.625 6.375T12 21"/>
          </svg>
        </button>
        
        <a href="/cart.html" class="btn btn--ghost btn--invert" aria-label="Shopping cart">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="currentColor" d="M7 18a2 2 0 1 0 0 4a2 2 0 0 0 0-4m10 0a2 2 0 1 0 0 4a2 2 0 0 0 0-4M6.2 6l.3 2h12.3a1 1 0 0 1 1 1l-1.2 6a2 2 0 0 1-2 1.6H8.7a2 2 0 0 1-2-1.7L5.3 5H3V3h3a1 1 0 0 1 1 .9L7.2 6Z"/>
          </svg>
          <span class="hide-sm">Cart</span>
        </a>
      </div>
    </div>
  </header>

  <main id="content">
    <section class="section">
      <div class="container">
        <h1>Theme Toggle Test</h1>
        <p>This page tests the theme toggle functionality.</p>
        
        <div class="card" style="margin: 20px 0; padding: 20px;">
          <h3>Test Card</h3>
          <p>This card should change colors when you toggle the theme.</p>
          <button class="btn btn--primary">Primary Button</button>
          <button class="btn btn--ghost">Ghost Button</button>
        </div>
        
        <div id="debug-info" style="margin: 20px 0; padding: 20px; border: 1px solid var(--border); border-radius: 8px;">
          <h3>Debug Info</h3>
          <p><strong>Current Theme:</strong> <span id="current-theme">Loading...</span></p>
          <p><strong>System Preference:</strong> <span id="system-pref">Loading...</span></p>
          <p><strong>Button Found:</strong> <span id="button-found">Loading...</span></p>
        </div>
      </div>
    </section>
  </main>

  <script>
    console.log('=== THEME TOGGLE DEBUG TEST ===');
    
    // Debug info
    function updateDebugInfo() {
      const currentTheme = document.documentElement.getAttribute('data-theme') || 'auto';
      const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const themeToggle = document.getElementById('theme-toggle');
      
      document.getElementById('current-theme').textContent = currentTheme;
      document.getElementById('system-pref').textContent = systemPrefersDark ? 'dark' : 'light';
      document.getElementById('button-found').textContent = themeToggle ? 'YES' : 'NO';
      
      console.log('Current theme:', currentTheme);
      console.log('System prefers dark:', systemPrefersDark);
      console.log('Button found:', !!themeToggle);
    }
    
    // Theme management
    function applyTheme(theme) {
      console.log('Applying theme:', theme);
      if (theme === 'auto') {
        document.documentElement.removeAttribute('data-theme');
      } else {
        document.documentElement.setAttribute('data-theme', theme);
      }
      localStorage.setItem('theme', theme);
      updateDebugInfo();
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM loaded, initializing theme toggle...');
      
      // Apply saved theme
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme) {
        applyTheme(savedTheme);
      }
      
      // Set up theme toggle
      const themeToggle = document.getElementById('theme-toggle');
      if (themeToggle) {
        console.log('Theme toggle button found, adding click handler');
        themeToggle.addEventListener('click', function() {
          console.log('Theme toggle clicked!');
          const currentTheme = document.documentElement.getAttribute('data-theme');
          const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          
          let newTheme;
          if (!currentTheme) {
            newTheme = systemPrefersDark ? 'light' : 'dark';
          } else if (currentTheme === 'light') {
            newTheme = 'dark';
          } else {
            newTheme = 'light';
          }
          
          console.log('Switching from', currentTheme || 'auto', 'to', newTheme);
          applyTheme(newTheme);
        });
      } else {
        console.error('Theme toggle button NOT found!');
      }
      
      updateDebugInfo();
      
      // Update debug info every second
      setInterval(updateDebugInfo, 1000);
    });
  </script>
</body>
</html>
